<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>details post</title>
       <!-- file css -->
       <link rel="stylesheet" href="../login and rigester/home.css">
       <!-- fonts.google -->
       <link href="https://fonts.googleapis.com/css2?family=BhuTuka+Expanded+One&family=Dancing+Script&display=swap" rel="stylesheet"> 
          <!-- axios -->
       <script src="../login and rigester/node_modules/axios/dist/axios.min.js"></script>

</head>
<body>
    <div id="home">
        <header>
            <div>
                <span>our world</span>
            </div>
            <div>
            <div class="search-cont">
                <img src="file:///C:/Users/Black%20Horse/Downloads/search-icon-png-9966%20(1).png">
                <input type="search" placeholder="search for pages and people">
            </div>
            </div>
            <div>
            <div>
                <button id="login">login</button>
                <button id="logout" onclick=" logout()">logout</button>
                <div class="cont-imge-profile"><img class="imge-pro" id="imgeProfile"  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
            </div>
            </div>
        </header>
        
        <aside>
            <div class="cont-sidbar">
                <div>
                    <div><img class="imge-pro" id="imge-prof" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
                    <div class="name">
                        <p id="namePerson">.......</p>
                        <p id="userName">@dayi</p>
                    </div>
                </div>
                <div class="part-2">
                    <div class="active">
                        <div> 
                            <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2jJLJQFoxc79zQra4uW1An_5uCbJC4XFm-A&usqp=CAU" >
                            <a href="../login and rigester/home.html"><span>home</span></a>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://cdn3.iconfinder.com/data/icons/google-material-design-icons/48/ic_explore_48px-512.png" >
                           <span  onclick="myProfile ()">profile</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQV_-36mO0m-R9ID5OcYWpEXJU2gzLxARLl3w&usqp=CAU" >
                            <span>notifications</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmSlK8Ofxoy7ljMY6KgObALgVW7oLLDwdeHw&usqp=CAU" >
                            <span>messages</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://i.pinimg.com/474x/da/92/d1/da92d1925b1852549c5192c223ff97f0.jpg" >
                            <span>bookmarks</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuq_aUq1RuDxbR2FmVum15AhaGIJMP4EGS_Q&usqp=CAU" >
                            <span>analytics</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhP6yZHJzC4o0iQBp6xhvQlSuc8Bp9S2l6jA&usqp=CAU" >
                            <span>theme</span>
                        </div>
                    </div>
                    <div>
                        <div> 
                            <img class="icon-sidbar" src="file:///C:/Users/Black%20Horse/Desktop/webs/pictures/setting_4.png" >
                            <span>setting</span>
                        </div>
                    </div>
                
                </div>
                <div class="new-post creatPost-sid" style="visibility: hidden;" >
                    <span onclick="creatPost ()">creat post</span>
                </div>
                
            </div>
        </aside>
        <div class="countner">
            <div></div>
        </div>
    </div>
    <div id="countMessage">
            <!-- <div id="message">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_wbBfnys5rxvgITJDUK-vKqPbaCW2rKSp-w&usqp=CAU">
                <p id="contentMessage">your /..../ has been confirmed</p>
            </div> -->
    </div>
    <div id="model" class="model-creat">
    <div>
        <p id="tittlePost">creat post</p>
        <span id="close-model-1">x</span>
    </div>
    <div>
        <div>
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU">
        </div>
        <div>
            <p id="namePublisher"></p>
            <p>public</p>
        </div>
    </div>
    <div>
        <div>
            <label>title:</label>
            <input class="titleModel" id="title" type="text"> 
            <label>content:</label>
            <input class="contentModel" id="content"  type="text"></input>
        </div>
        <div>
            <label> image:</label>
            <!-- <div class="contChooseImage">
                <button class="chosseFile">chosse file</button>
            </div> -->
            <input id="fileImage" class="filee" type="file">
        </div>
    </div>
    <div>
        <button id="close-model-2">close</button>
        <button class="craetPosttOrUpdate" id="craetPostt">creat</button>
    </div>
    <input id="hiddenForId" type="hidden">
    </div>
    <div class="model-delete">
        <div>
            <p>are you confirm to delete this post ?</p>
        </div>
        <div>
            <button onclick="closModelDelete()" id="close-model-3">close</button>
            <button onclick="deleteConform()">delete</button>
            <input id="hiddenForIdDelete" type="hidden">
        </div>
    
    </div>
    
<script>
    let url = new URLSearchParams(location.search)
    id =url.get("idPost")  
    function readPost() {
    // Requests => show details the post
    let baseUrl = "https://tarmeezacademy.com/api/v1/posts"
    axios.get(baseUrl+"/"+id)
    .then(function (response) {
        let post= response.data.data;
        console.log(post.id)
        if (isObjEmptyPictureProfile (post.image)) {
            var imagee = "https://i.pinimg.com/originals/84/2a/d6/842ad68b315b0f586c30b465221da609.jpg"                 
        }else{
            imagee = `"${post.image}"`
        }
        if (isObjEmptyPictureProfile (post.author.profile_image)) {
            var imageProfile = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"                 
        }else{
            imageProfile =post.author.profile_image
        }
        let titleCont =""
        if(post.title != null){
            titleCont =`${ post.title} :`
        }
        let comments = ``
        for(comment of post.comments){
            comments += `
            <div class="comments-post"> 
                <div class="contImageName" > 
                    <img src="${comment.author.profile_image}">
                    <span> ${comment.author.username} </span>
                </div> 
                <div>
                    <p> 
                        ${
                            comment.body
                        }
                    </p>
                </div> 
            </div>
            `
        }
        settingPopp(post,1)
        document.querySelector(".countner >div").innerHTML =  `
        <div class="cont-post cont-post-datails" >
            <div>
                <div><img class="imge-pro" onclick="goToProfile (${post.author.id})" style ="cursor: pointer;" src="${imageProfile}"></div>
                <div>
                    <p onclick="goToProfile (${post.author.id})" style ="cursor: pointer;">${post.author.username}</p>
                    <p>cairo ${post.created_at} </p>
                </div>
                ${edit}
            </div>
            <div class="imge-post">
                <img  src=${imagee}>
            </div>
            <div class="body-post"> 
                <h4>${titleCont}</h4>
                <article>${post.body}</article>
            </div>
            <div class="actionsAndTags"> 
                <div class="actions">
                    <div>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAMAAABHh7fWAAAAYFBMVEUAAAD////p6ent7e35+fmHh4e9vb329vaLi4syMjI7OztnZ2dDQ0N0dHTi4uLz8/Ovr69hYWHR0dF8fHzIyMgLCwsqKipUVFQdHR3Z2dm2traioqIUFBRNTU2VlZVsbGxrIfkgAAADrklEQVRoge2a6baqMAyFW2aRWWVwfP+3vChO0Cktga51j/t/8gktdTcJodZEfugf+of+Y2gvdx3HzUPdrOEQ55mhPSeIbk2yads6vmx3RQbkh1nhby9x3babpLlFgSPkC9CVn5CJ6jRQg4O0nsYlfgVHeycm/ik/k3GdSBBWX3mvjEW7viDBQ2UnAnelLM531eiTLMFdKZvk/oNTVdxpuugTdMUsMav2yJKPrToumaz5GK185EG7ydKFO1jcSYxWvrSXLs7oZV+gcakA7TXQDIScv7Z6dobHNR4PHcbwDL3eO73TCotDFu0BNthIz+fONMMSj0FLv0qezo/fH2q87UHlFC06iCRq7nEa++OlaIze62cg5Erp1SRuP0KbZOi3mt4We+sbDTwSpor1Poq3dh+04Y83V/dGa+/uuSpf6GptMiHVE71dH70d0NlhffQhe6CB/5S4Oj3Qhl/IPMV3dGfhffdvvOvRhQ0yIUWPBlsTXKU9emMHvaHEs7LU/WJ7RNdloCkjFk7RQRUxMgkY2pPAFjr4o2iLa21xhzu20A6h2tcHHJ37M1z3roWkpEdLSyfLKerRlr6uoEc7gDIIvlrn7s0MLovz1Txs4dEG+vhAu6La4IKq3eH2YWGP+8+LjwWjkr1umqs/tv++5OZro/NPVWHla0DxXUsBlxoxdBmVcVb963TGdbMVT/JXH+NdLTSqgJnoyhQqTeqFJoooi16H/SGPSvErvPMr5aOXZ3+TJ72Phdkj8rTjs2g1adx1YfpcCx6pBZWjlztbmI4o21hc6BLG9mI57dRF2HuWw+vkVuh3oQOvj8ztX3fI7DO3g81vneMWLw/8xrOga495JWkdPkM0q+CiFRFrbr9bgqY5Uq06zkUE8XBIiHLxjsWDHZK5FJ2mskgXyWiKbCRmPruRDcXIp3Fu88hbaXLFDJJhx3FQKs+tGn+acR3zFamVk1fGbBUZMPRlaFQjZWLAvJmRYbuq80JG3QwM20mdFTZlp13omdowc7SuYQMMpoHRemwYGTzWGMDNA5AMn6jcA03TgWMAZ6JpBXpurgGciwaZxbNw/m8WmmZKw9ZKxx5noJXVVKENm49WmMWNwHqioKkrMWyx1jPrjyvnwuJeIrSeSGhhYVFmALHQ/ImlUh2HgOYNDskNIB6aHepQGEBE9NSo7oySGA7kjwyb0gCior8NG8CGoaI/hg1iw3DRrwobyIYho+m+rOsSbAxQ0f2JrnlqI6Ln6Yf+oX/o/w/9DwWyLwoZImi1AAAAAElFTkSuQmCC">
                        <span>54</span>
                    </div>
                    <div>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Simple_Comments.svg/1024px-Simple_Comments.svg.png">
                        <span>${post.comments_count} </span>
                    </div>
                    <div>
                        <img src="https://cdn.icon-icons.com/icons2/936/PNG/512/share-symbol_icon-icons.com_73418.png">
                        <span>76</span>
                    </div>
                </div>
                
            </div>
            ${popp}
            </div>
            <div  class="all-comments-post">
                ${comments}
            </div> 
            <div style ="visibility: hidden;" class="comment-creat" id="commentCreat" >
                <img id="image-comint" class="image-comint" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU">
                <input id="comment" type="text" placeholder="write a comment" value="">
                <button onclick="creatComment()" class="click-comint" id="comment">comment</button>
            </div> 

        `
    }).then(function(){
    if(localStorage.getItem("token") !==null){
        console.log(document.getElementById("commentCreat"))
        document.getElementById("commentCreat").style.visibility = "visible"
    }
    console.log(document.querySelector(".countner >div"))
    console.log(document.getElementsByClassName("menuSetting").length)

    })
}
    readPost()
    function creatComment (){
        let token =localStorage.getItem("token")
        let baseUrl = "https://tarmeezacademy.com/api/v1/posts"
        let yourComment = document.getElementById("comment").value
        let body ={
            "body": `${yourComment}`
        }
        axios.post(`${baseUrl}/${id}/comments`,body,{
                headers:{
                    "authorization": `Bearer ${token}`,
                }
            })
        .then(function(){ 
            message("you created the comment successfully","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_wbBfnys5rxvgITJDUK-vKqPbaCW2rKSp-w&usqp=CAU")
            readPost()
            console.log("hi")
        })
        .catch((eroor)=>{
            message(eroor.response.data.message,"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2odXc3DVvMonj_yuXb8q5kR0N-1ndG8Fv9VSufsUAf60UjwbOPkWZVbPmZVuOf3-PoB0&usqp=CAU")
            console.log(eroor.response.data.message)
        })
    }
   
</script>
<script src="../login and rigester/home.js"></script>
</body>
</html>