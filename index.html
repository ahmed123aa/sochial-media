<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- file css -->
    <link rel="stylesheet" href="../social/home.css">
    <!-- fonts.google -->
    <link href="https://fonts.googleapis.com/css2?family=BhuTuka+Expanded+One&family=Dancing+Script&display=swap" rel="stylesheet"> 
    <!-- axios -->
    <script src="../social/node_modules/axios/dist/axios.min.js"></script>

    <title>welcome</title>
</head>
<body>
  <div id="home" class="home">
    <header>
        <div>
            <span>our world</span>
        </div>
        <div>
           <div class="search-cont">
            <img src="file:///C:/Users/Black%20Horse/Downloads/search-icon-png-9966%20(1).png">
            <input type="search" placeholder="search for pages and people">
           </div>
        </div>
        <div>
          <div>
            <button id="login">login</button>
            <button id="logout" onclick=" logout()">logout</button>
            <div class="cont-imge-profile"><img class="imge-pro" id="imgeProfile"  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
          </div>
        </div>
    </header>

   <aside>
    <div class="cont-sidbar">
        <div>
            <div><img class="imge-pro" id="imge-prof" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
            <div class="name">
                <p id="namePerson">.......</p>
                <p id="userName">@dayi</p>
            </div>
        </div>
        <div class="part-2">
            <div class="active">
                <div> 
                    <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2jJLJQFoxc79zQra4uW1An_5uCbJC4XFm-A&usqp=CAU" >
                    <!-- <img class="icon-sidbar" src="data:image/png;base64,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" > -->
                    <span>home</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://cdn3.iconfinder.com/data/icons/google-material-design-icons/48/ic_explore_48px-512.png" >
                    <span onclick="myProfile ()">profile</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQV_-36mO0m-R9ID5OcYWpEXJU2gzLxARLl3w&usqp=CAU" >
                    <span>notifications</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSmSlK8Ofxoy7ljMY6KgObALgVW7oLLDwdeHw&usqp=CAU" >
                    <span>messages</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://i.pinimg.com/474x/da/92/d1/da92d1925b1852549c5192c223ff97f0.jpg" >
                    <span>bookmarks</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuq_aUq1RuDxbR2FmVum15AhaGIJMP4EGS_Q&usqp=CAU" >
                    <span>analytics</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhP6yZHJzC4o0iQBp6xhvQlSuc8Bp9S2l6jA&usqp=CAU" >
                    <span>theme</span>
                </div>
            </div>
            <div>
                <div> 
                    <img class="icon-sidbar" src="file:///C:/Users/Black%20Horse/Desktop/webs/pictures/setting_4.png" >
                    <span>setting</span>
                </div>
            </div>
          
        </div>
        <div id="new-post" class="new-post creatPost-sid">
            <span onclick="creatPost ()">creat post</span>
        </div>
    
    </div>
   </aside>
   <div class="countner">
    <div>
        <div class="story">
            <div>
                <div><img id="yourStory" class="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
                <span>your story</span>
            </div>
            <div>
                <div><img class="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTri9yKYQWVovHfSZWV4RLmjeNiaRJpK8u7IQ&usqp=CAU"></div>
               <span>ali said</span>
            </div>
            <div>
                <div><img class="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRBE1bJJ7pTQi5vGIwSsqZ26Mbt3-YW7IQLtw&usqp=CAU"></div>
                <span>wail hossam</span>
            </div>
            <div>
                <div><img class="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJCg0E_o0bH0cFSMzjQKM59UqY2b0pJA642Q&usqp=CAU"></div>
                <span>eslam hady</span>
            </div>
            <div>
                <div><img class="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRFJElqpU95mF1RzHvGXtZEhgNJkbqhCvOwEg&usqp=CAU"></div>
                <span>omar ali</span>
            </div>
        </div>
        
        
        <div class="new-post creat-post">
            <div><img class="imge-pro" id="imge-pro" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"></div>
            <textarea id="whatIsOnYourMind" placeholder=""></textarea>
            <button onclick="creatPost()"> post</button>
        </div>
        <!-- dynamik posts by js -->
        <!-- <div class="cont-post">
        </div> -->          
    </div>
    <!-- for messge and requsts  -->
    <div class="requsts">
        
    </div>    
   </div>
 </div>
 <div id="countMessage">
    <!-- <div id="message">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_wbBfnys5rxvgITJDUK-vKqPbaCW2rKSp-w&usqp=CAU">
        <p id="contentMessage">your /..../ has been confirmed</p>
     </div> -->
 </div>
 <div id="model" class="model-creat">
    <div>
        <p id="tittlePost">creat post</p>
        <span id="close-model-1">x</span>
    </div>
    <div>
        <div>
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU">
        </div>
        <div>
            <p id="namePublisher"></p>
            <p>public</p>
        </div>
    </div>
    <div>
        <div>
            <label>title:</label>
            <input class="titleModel" id="title" type="text"> 
            <label>content:</label>
            <input class="contentModel" id="content"  type="text"></input>
        </div>
        <div>
            <label> image:</label>
            <!-- <div class="contChooseImage">
                <button class="chosseFile">chosse file</button>
            </div> -->
            <input id="fileImage" class="filee" type="file">
        </div>
    </div>
    <div>
        <button id="close-model-2">close</button>
        <button class="craetPosttOrUpdate" id="craetPostt">creat</button>
    </div>
    <input id="hiddenForId" type="hidden">
 </div>
 <div class="model-delete">
    <div>
        <p>are you confirm to delete this post ?</p>
    </div>
    <div>
        <button onclick="closModelDelete()" id="close-model-3">close</button>
        <button onclick="deleteConform()">delete</button>
        <input id="hiddenForIdDelete" type="hidden">
    </div>

 </div>
 <div id="loader">
    <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
 </div>
 <div id="scrollUp" class="scrollUp">
 </div>



    <script>

// ============loader => start============================================= 
    function loaderToggle(show){
        let loader = document.getElementById("loader")
        if(show){
            loader.style.visibility="visible"
        }else{
            loader.style.visibility="hidden"
        }
 }
 // ============loader => end============================================= 

 // ============pagination => start============================================= 
let last_page; 
let currentPage = 1
        window.addEventListener("scroll",function(){
            let endPage = window.innerHeight + window.scrollY >= document.documentElement.scrollHeight
            if (endPage && currentPage<last_page) {
                currentPage++
                readPost(currentPage)
            }
}) 
// ===========pagination => end================================================   

// ===========show posts => start===============================================
readPost(currentPage)
    // read Posts
    function readPost(currentPage) {
    // loader
    loaderToggle(true)
    // Requests => show some posts
    let baseUrl = "https://tarmeezacademy.com/api/v1/posts"
    fetch(`${baseUrl}?page=${currentPage}`)
    .then((responseJson)=>{
    return  responseJson.json()

    }).then((jsObject)=>{
        last_page = jsObject.meta.last_page
    let data   =  jsObject.data
    let count =0
    for(let post of data){
            // let  ta gName =[]
            // for(tag of post.tags){
            //     tagName.push(tag.name)
            // }
            // if(tagName[2]==undefined){
            //     tagName[2]=tag.arabic_name
            // }
            // let strigObj =JSON.stringify(post) 
            
            let edit =""
            let popp =""
            
            if(localStorage.getItem("token") !==null){
            if(post.author.id==JSON.parse(localStorage.getItem("userData")).id){
                count++
                edit=`<img id="threeLines" class="threeLines"  onclick="apearPoppSetting (${count})" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTEI8WPzGIYKhyNogTncG7fYhEW-1UOTi8YvA&usqp=CAU">`
                popp=`
                    <div style ="visibility: hidden;" id ="menuSetting" class="menuSetting">
                        <div class="deleteCont"  onclick="deletePost('${post.id}')">
                            <img src=" https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4EMnEciew_onpMaTiS2xtPZxPlw4upCFNpQ&usqp=CAU">
                            <span>delete</span>
                        </div>
                        <div class="updateCont"  onclick="update('${encodeURIComponent(JSON.stringify(post))}')" >
                            <img src="https://cdn0.iconfinder.com/data/icons/social-media-glyph-1/64/Facebook_Social_Media_User_Interface-41-512.png">
                            <span>update</span>
                        </div>
                        <div>
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWppIpYBlxcjmQ0lRNsZvBWjrrwthDt6_ZKg&usqp=CAU">
                            <span>hidden</span>
                        </div>
                        <span onclick="closeSetting()" class ="closeSetting"> x</span>
                    </div>
                    
                    `
                    // <input type="hidden" value="${count}">
            }   
            }  

            if (isObjEmptyPictureProfile (post.image)) {
                var imagee = "https://i.pinimg.com/originals/84/2a/d6/842ad68b315b0f586c30b465221da609.jpg"                 
            }else{
                imagee = `"${post.image}"`
            }
            if (isObjEmptyPictureProfile (post.author.profile_image)) {
                var imageProfile = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR05q_vg5Ux_rPqNDBBeYLc1BHrG-qjaw7_tA&usqp=CAU"                 
            }else{
                imageProfile =post.author.profile_image
            }
            let titleCont =""
            if(post.title != null){
                titleCont =`${ post.title} :`
            }
            // console.log(post)
            document.querySelector(".countner >div").innerHTML +=  `
            <div  class="cont-post"  >
                <div>
                    <div><img class="imge-pro" onclick="goToProfile (${post.author.id})" style ="cursor: pointer;" src="${imageProfile}"></div>
                    <div>
                        <p onclick="goToProfile (${post.author.id})" style ="cursor: pointer;">${post.author.username}</p>
                        <p>cairo ${post.created_at} </p>
                    </div>
                    ${edit}
                </div>
                <div class="imge-post" onclick="detailspost (${post.id})" style ="cursor: pointer;">
                    <img  src=${imagee}>
                </div>
                <div class="body-post"  onclick="detailspost (${post.id})" style ="cursor: pointer;"> 
                    <h4>${titleCont}</h4>
                    <article>${post.body}</article>
                </div>
                <div class="actionsAndTags"> 
                    <div class="actions">
                        <div>
                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAMAAABHh7fWAAAAYFBMVEUAAAD////p6ent7e35+fmHh4e9vb329vaLi4syMjI7OztnZ2dDQ0N0dHTi4uLz8/Ovr69hYWHR0dF8fHzIyMgLCwsqKipUVFQdHR3Z2dm2traioqIUFBRNTU2VlZVsbGxrIfkgAAADrklEQVRoge2a6baqMAyFW2aRWWVwfP+3vChO0Cktga51j/t/8gktdTcJodZEfugf+of+Y2gvdx3HzUPdrOEQ55mhPSeIbk2yads6vmx3RQbkh1nhby9x3babpLlFgSPkC9CVn5CJ6jRQg4O0nsYlfgVHeycm/ik/k3GdSBBWX3mvjEW7viDBQ2UnAnelLM531eiTLMFdKZvk/oNTVdxpuugTdMUsMav2yJKPrToumaz5GK185EG7ydKFO1jcSYxWvrSXLs7oZV+gcakA7TXQDIScv7Z6dobHNR4PHcbwDL3eO73TCotDFu0BNthIz+fONMMSj0FLv0qezo/fH2q87UHlFC06iCRq7nEa++OlaIze62cg5Erp1SRuP0KbZOi3mt4We+sbDTwSpor1Poq3dh+04Y83V/dGa+/uuSpf6GptMiHVE71dH70d0NlhffQhe6CB/5S4Oj3Qhl/IPMV3dGfhffdvvOvRhQ0yIUWPBlsTXKU9emMHvaHEs7LU/WJ7RNdloCkjFk7RQRUxMgkY2pPAFjr4o2iLa21xhzu20A6h2tcHHJ37M1z3roWkpEdLSyfLKerRlr6uoEc7gDIIvlrn7s0MLovz1Txs4dEG+vhAu6La4IKq3eH2YWGP+8+LjwWjkr1umqs/tv++5OZro/NPVWHla0DxXUsBlxoxdBmVcVb963TGdbMVT/JXH+NdLTSqgJnoyhQqTeqFJoooi16H/SGPSvErvPMr5aOXZ3+TJ72Phdkj8rTjs2g1adx1YfpcCx6pBZWjlztbmI4o21hc6BLG9mI57dRF2HuWw+vkVuh3oQOvj8ztX3fI7DO3g81vneMWLw/8xrOga495JWkdPkM0q+CiFRFrbr9bgqY5Uq06zkUE8XBIiHLxjsWDHZK5FJ2mskgXyWiKbCRmPruRDcXIp3Fu88hbaXLFDJJhx3FQKs+tGn+acR3zFamVk1fGbBUZMPRlaFQjZWLAvJmRYbuq80JG3QwM20mdFTZlp13omdowc7SuYQMMpoHRemwYGTzWGMDNA5AMn6jcA03TgWMAZ6JpBXpurgGciwaZxbNw/m8WmmZKw9ZKxx5noJXVVKENm49WmMWNwHqioKkrMWyx1jPrjyvnwuJeIrSeSGhhYVFmALHQ/ImlUh2HgOYNDskNIB6aHepQGEBE9NSo7oySGA7kjwyb0gCior8NG8CGoaI/hg1iw3DRrwobyIYho+m+rOsSbAxQ0f2JrnlqI6Ln6Yf+oX/o/w/9DwWyLwoZImi1AAAAAElFTkSuQmCC">
                            <span>54</span>
                        </div>
                        <div>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Simple_Comments.svg/1024px-Simple_Comments.svg.png">
                            <span>${post.comments_count} </span>
                        </div>
                        <div>
                            <img src="https://cdn.icon-icons.com/icons2/936/PNG/512/share-symbol_icon-icons.com_73418.png">
                            <span>76</span>
                        </div>
                    </div>
                    
                </div>
                ${popp}
            </div>

            `
    }
    //    <div class="tags">
    //        <div><span> ${tagName[0]}</span></div>
    //        <div><span> ${tagName[1]}</span></div>
    //        <div><span> ${tagName[2]}</span></div>  
    //   </div>
    }).catch((eroor)=>{
        console.log("error")
        console.log(eroor)
    }).finally( ()=>{
        loaderToggle(false)

    })

    }
// ===========show posts => end================================================

// show scroll up
function showScrollUp(){
    let Buttom = document.getElementById("scrollUp")
    window.onscroll = function(){
        if(scrollY >= 500){
            Buttom.style.visibility ="visible"
        }else{
            Buttom.style.visibility ="hidden"
        }
    }
    
}
showScrollUp()

// *****************************************************
// click scroll up
function clickScrollUp(){
    let Buttom = document.getElementById("scrollUp")
    Buttom.onclick = function(){
        scrollTo({
            left:0,
            top:0,
            behavior:"smooth"
        })
    }
}
clickScrollUp()

// *****************************************************

    </script>
    <script src="../social/main.js"></script>
</body>
</html>